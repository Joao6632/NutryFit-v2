<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link rel="stylesheet" href="Avaliacao.css">
    <link rel="stylesheet" href="../../Global/fonts.css">
    <link rel="icon" href="../../assets/nutrifiticon.png" type="image/png">
    <script src="Avaliacao.js" defer></script>
    <title>NutryFit - Avaliações</title>
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar-custom" id="sidebar">
        <button class="sidebar-toggle" id="sidebarToggle">
            <i class="bi bi-three-dots"></i>
        </button>
        
        <div class="sidebar-content">
            <ul class="nav nav-pills flex-column mb-auto">
                <li class="nav-item mb-2">
                    <a href="../aInicio/Inicio.html" class="nav-link">
                        <i class="bi bi-house-door"></i>
                        <span class="nav-text">Início</span>
                    </a>
                </li>
                <li class="nav-item mb-2">
                    <a href="../bAvaliacao/Avaliacao.html" class="nav-link active">
                        <i class="bi bi-journal-text"></i>
                        <span class="nav-text">Avaliações</span>
                    </a>
                </li>
                <li class="nav-item mb-2">
                    <a href="../cPacientes/Paci.html" class="nav-link">
                        <i class="bi bi-person-badge"></i>
                        <span class="nav-text">Pacientes</span>
                    </a>
                </li>
                <li class="nav-item mb-2">
                    <a href="../dRelatorio/Relatorio.html" class="nav-link">
                        <i class="bi bi-file-earmark-text"></i>
                        <span class="nav-text">Relatórios</span>
                    </a>
                </li>
                <li class="nav-item mb-2">
                    <a href="../ePerfil/Perfil.html" class="nav-link">
                        <i class="bi bi-person"></i>
                        <span class="nav-text">Perfil</span>
                    </a>
                </li>
            </ul>
            
            <div class="logout-section">
                <a href="#sair" class="nav-link">
                    <i class="bi bi-box-arrow-left"></i>
                    <span class="nav-text">Sair</span>
                </a>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content" id="mainContent">
        <div class="container-avaliacoes">
            
            <!-- Barra de Pesquisa -->
            <div class="search-container">
                <i class="bi bi-search search-icon"></i>
                <input type="text" class="search-input" id="searchInput" placeholder="Dica: busque por nome de pacientes">
            </div>
            
            <!-- Cabeçalho das Avaliações -->
            <h3 class="titulo-lista">Avaliações Feitas</h3>
            
            <!-- Lista de Avaliações -->
            <div class="avaliacoes-box" id="avaliacaoLista">
                <!-- As avaliações serão renderizadas aqui via JavaScript -->
            </div>
            
            <!-- Botão Nova Avaliação -->
            <div class="nova-avaliacao">
                <button id="btnNovaAvaliacao" class="btn-nova-avaliacao">
                    <i class="bi bi-plus-lg"></i>
                    Nova Avaliação
                </button>
            </div>
        </div>
    </div>

    <!-- Modal Nova Avaliação -->
    <div class="modal fade" id="modalNovaAvaliacao" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content modal-custom">
                <div class="modal-header">
                    <h5 class="modal-title">Nova Avaliação</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="formAvaliacao">
                        <div class="row">
                            <!-- Coluna Esquerda -->
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="pacienteId" class="form-label">Paciente</label>
                                    <select class="form-control" id="pacienteId" required>
                                        <option value="">Selecione o paciente para avaliar</option>
                                    </select>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="alturaAtual" class="form-label">Altura atual</label>
                                    <input type="number" class="form-control" id="alturaAtual" 
                                           placeholder="Selecione o paciente para avaliar" step="0.01">
                                </div>
                                
                                <div class="mb-3">
                                    <label for="pesoAtual" class="form-label">Peso atual</label>
                                    <input type="number" class="form-control" id="pesoAtual" 
                                           placeholder="Insira o peso do paciente" step="0.1">
                                </div>
                                
                                <div class="mb-3">
                                    <label for="frequenciaRefeicoes" class="form-label">Frequência das refeições</label>
                                    <select class="form-control" id="frequenciaRefeicoes">
                                        <option value="">Selecione o paciente para avaliar</option>
                                        <option value="2 refeições por dia">2 refeições por dia</option>
                                        <option value="3 refeições por dia">3 refeições por dia</option>
                                        <option value="4 refeições por dia">4 refeições por dia</option>
                                        <option value="5 refeições por dia">5 refeições por dia</option>
                                        <option value="6+ refeições por dia">6+ refeições por dia</option>
                                    </select>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="dataConsulta" class="form-label">Data da consulta</label>
                                    <input type="date" class="form-control" id="dataConsulta" required>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="percentualGordura" class="form-label">Percentual de gordura</label>
                                    <input type="number" class="form-control" id="percentualGordura" 
                                           placeholder="Insira o percentual de gordura atual" step="0.1">
                                </div>
                            </div>
                            
                            <!-- Coluna Direita -->
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="atividadesFisicas" class="form-label">Atividades Físicas</label>
                                    <select class="form-control" id="atividadesFisicas">
                                        <option value="">O paciente está se exercitando?</option>
                                        <option value="Sedentário">Sedentário</option>
                                        <option value="Leve">Atividade leve</option>
                                        <option value="Moderado">Atividade moderada</option>
                                        <option value="Intenso">Atividade intensa</option>
                                        <option value="Muito intenso">Muito intenso</option>
                                    </select>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="habitosMastigacao" class="form-label">Hábitos de mastigação</label>
                                    <select class="form-control" id="habitosMastigacao">
                                        <option value="">Como o paciente está mastigando?</option>
                                        <option value="Muito rapidamente">Muito rapidamente</option>
                                        <option value="Rapidamente">Rapidamente</option>
                                        <option value="Normal">Normal</option>
                                        <option value="Devagar">Devagar</option>
                                        <option value="Muito devagar">Muito devagar</option>
                                    </select>
                                </div>
                                
                                
                                
                                <!-- Métricas Section -->
                                <div class="metrics-section">
                                    <h5>Métricas</h5>
                                    <div class="row">
                                        <div class="col-6">
                                            <label for="cintura" class="form-label">Cintura</label>
                                            <input type="number" class="form-control" id="cintura" 
                                                   placeholder="Insira em cm a medida da cintura atual" step="0.1">
                                        </div>
                                        <div class="col-6">
                                            <label for="quadril" class="form-label">Quadril</label>
                                            <input type="number" class="form-control" id="quadril" 
                                                   placeholder="Insira em cm a medida atual do quadril" step="0.1">
                                        </div>
                                    </div>
                                    
                                    <div class="mt-3">
                                        <label for="imc" class="form-label">IMC (calculado automaticamente)</label>
                                        <input type="text" class="form-control" id="imc" 
                                               placeholder="(automático)" readonly>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Observações -->
                        <div class="row mt-3">
                            <div class="col-12">
                                <label for="observacoes" class="form-label">Observações</label>
                                <textarea class="form-control" id="observacoes" rows="3" 
                                          placeholder="Insira suas observações sobre o estado nutricional do paciente."></textarea>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" id="btnSalvarAvaliacao">Realizar avaliação</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Informações da Avaliação -->
    <div class="modal fade" id="modalInfoAvaliacao" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content modal-info-custom">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalInfoTitle">Informações - João Tavares de Souza</h5>
                    <button type="button" class="btn-close-custom" data-bs-dismiss="modal">
                        <i class="bi bi-x"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="info-content">
                        <div class="info-row">
                            <div class="info-group">
                                <strong>Nome</strong>
                                <span id="infoNome">João Tavares de Souza</span>
                            </div>
                            <div class="info-group">
                                <strong>Atividades Físicas</strong>
                                <span id="infoAtividades">Sedentário (nenhum exercício)</span>
                            </div>
                            <div class="info-group">
                                <strong>Histórico de Saúde</strong>
                                <span id="infoHistorico">Hipertensão</span>
                            </div>
                        </div>

                        <div class="info-row">
                            <div class="info-group">
                                <strong>Sexo</strong>
                                <span id="infoSexo">Masculino</span>
                            </div>
                            <div class="info-group">
                                <strong>Hábitos de mastigação</strong>
                                <span id="infoMastigacao">Rapidamente</span>
                            </div>
                            <div class="info-group">
                                <strong>Uso de substâncias</strong>
                                <span id="infoSubstancias">Álcool
                                Detalhes: Bebe socialmente aos finais de semana</span>
                            </div>
                        </div>

                        <div class="info-row">
                            <div class="info-group">
                                <strong>Contato</strong>
                                <span id="infoContato">(61) 99999-9999</span>
                            </div>
                            <div class="info-group">
                                <strong>Percentual de gordura</strong>
                                <span id="infoGordura">17%</span>
                            </div>
                            <div class="info-group">
                                <strong>IMC</strong>
                                <span id="infoIMC">(automático)</span>
                            </div>
                        </div>

                        <div class="info-row">
                            <div class="info-group">
                                <strong>Data de Nascimento</strong>
                                <span id="infoNascimento">12/05/2007 - 18 Anos</span>
                            </div>
                            <div class="info-group">
                                <strong>Peso atual</strong>
                                <span id="infoPeso">60,49</span>
                            </div>
                            <div class="info-group">
                                <strong>Altura atual</strong>
                                <span id="infoAltura">1,73</span>
                            </div>
                        </div>

                        <div class="info-row">
                            <div class="info-group">
                                <strong>Frequência das refeições</strong>
                                <span id="infoRefeicoes">3 Refeições por dia</span>
                            </div>
                            <div class="info-group">
                                <strong>Data da Consulta</strong>
                                <span id="infoDataConsulta">-</span>
                            </div>
                            <div class="info-group">
                                <strong>Observações</strong>
                                <span id="infoObservacoes">-</span>
                            </div>
                        </div>

                        <!-- Seção Métricas -->
                        <div class="metricas-section">
                            <h4>Métricas</h4>
                            <div class="metricas-row">
                                <div class="metrica-item">
                                    <strong>Cintura</strong>
                                    <span id="infoCintura">98</span>
                                </div>
                                <div class="metrica-item">
                                    <strong>Quadril</strong>
                                    <span id="infoQuadril">102</span>
                                </div>
                            </div>
                        </div>

                        <!-- Seção Objetivos -->
                        <div class="objetivos-section">
                            <h4>Objetivos nutricionais</h4>
                            <p id="infoObjetivos">O paciente deseja emagrecer.</p>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn-excluir-paciente" id="btnExcluirAvaliacao">
                        <i class="bi bi-trash"></i>
                        Excluir Avaliação
                    </button>
                    <button type="button" class="btn-avaliacoes" data-bs-dismiss="modal">
                        <i class="bi bi-journal-text"></i>
                        Fechar
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        document.addEventListener("DOMContentLoaded", () => {
    const logoutLink = document.querySelector(".logout-section .nav-link");

    if (logoutLink) {
        logoutLink.addEventListener("click", (e) => {
            e.preventDefault();

            const confirmar = confirm("Tem certeza que quer sair?");
            if (confirmar) {
                localStorage.removeItem("nutryfit_current_user");
                window.location.href = "../../bTelaLogin&Cad/LoginCad.html"; // <-- ajusta o caminho aqui
            }
        });
    }
});
    </script>
</body>
</html>